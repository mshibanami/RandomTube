box: phusion/passenger-full
build:
  steps:
    - npm-install
    - npm-test
    - script:
        name: compass
        code: |
          gem install compass
          compass compile -e production --force
    - arjen/hugo-build:
      version: "0.14"
    - script:
        name: purify-css
        code: |
          css='public/css/compiled/style.css'
          ./node_modules/purify-css/bin/purifycss $css public/[a-z][a-z]/index.html --min --out $css
deploy:
  steps:
    - lukevivier/gh-pages:
      token: $GITHUB_TOKEN
      repo: mshibanami/randomtube
      basedir: public
